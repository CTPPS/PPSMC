####################
#
# CONDOR DAGMAN FOR RUN-2 UL MC SIMULATION
# BY GUSTAVO SILVEIRA (UFRGS/UERJ)
#
####################

#
# USER INPUT BELOW AFTER JOB LIST <<<
#

# JOBS:
SCRIPT PRE LHE init.sh

JOB LHE sub/fpmc-semi.sub
SCRIPT POST LHE sendmail.sh $JOB

JOB Merge sub/MERGE.sub
SCRIPT POST Merge sendmail.sh $JOB

JOB pLHE sub/pLHE.sub
SCRIPT POST pLHE sendmail.sh $JOB

JOB GEN sub/GEN.sub
SCRIPT POST GEN sendmail.sh $JOB

JOB SIM sub/SIM.sub
SCRIPT POST SIM sendmail.sh $JOB

JOB DR sub/DR.sub
SCRIPT POST DR sendmail.sh $JOB

JOB HLT sub/HLT.sub
SCRIPT POST HLT sendmail.sh $JOB

JOB RECO sub/RECO.sub
SCRIPT POST RECO sendmail.sh $JOB

JOB MINI sub/MINI.sub
SCRIPT POST MINI sendmail.sh $JOB

JOB CLEANUP sub/CLEAN.sub
SCRIPT POST CLEANUP sendmail.sh $JOB

####################
#
# USER INPUTS
#

# LHE DEFINITIONS:
VARS LHE ENERGY="13000"
VARS LHE EVTS="50"
VARS LHE PID="16010"
VARS ALL_NODES A0W="3E-7"
VARS ALL_NODES ACW="1E-7"
VARS ALL_NODES A1="0E0"
VARS ALL_NODES A2="0E0"

# GLOBAL DEFINITIONS:
VARS ALL_NODES INPUTPATH="/eos/cms/store/group/phys_pps/MC/requests_2019ul/private/UL18/"
VARS ALL_NODES FILES="10"
VARS ALL_NODES JOBNAME="FPMC-Run2-$(A0W)-$(ACW)"
VARS ALL_NODES PRODNAME="FPMC_WW_13TeV_a0w_$(A0W)_aCw_$(ACW)_SemiDecay_pt0"
VARS ALL_NODES EOSROOT="root://eoscms.cern.ch"
VARS ALL_NODES EOSAREA="/eos/cms/store/group/phys_pps/MC/requests_2019ul/private/UL18/"

####################

#
# INTERNAL SET OF PARAMETERS FOR 20UL
#

# SIMULATION STEPS:
VARS LHE INPUTCARD="input.card"
VARS LHE EXTRA="fpmc_lhe.f"

VARS pLHE SCRAMARCH="slc7_amd64_gcc700"
VARS pLHE CMSSW="CMSSW_10_6_21"
VARS pLHE CONFIG="pLHE_cfg.py"

VARS GEN SCRAMARCH="slc7_amd64_gcc700"
VARS GEN CMSSW="CMSSW_10_6_21"
VARS GEN CONFIG="GEN_cfg.py"

VARS SIM SCRAMARCH="slc7_amd64_gcc700"
VARS SIM CMSSW="CMSSW_10_6_21"
VARS SIM CONFIG="SIM_cfg.py"

VARS DR SCRAMARCH="slc7_amd64_gcc700"
VARS DR CMSSW="CMSSW_10_6_21"
VARS DR CONFIG="DRPremix_cfg.py"

VARS HLT SCRAMARCH="slc7_amd64_gcc700"
VARS HLT CMSSW="CMSSW_10_2_16_UL"
VARS HLT CONFIG="HLT_cfg.py"

VARS RECO SCRAMARCH="slc7_amd64_gcc700"
VARS RECO CMSSW="CMSSW_10_6_17_patch1"
VARS RECO CONFIG="RECO_cfg.py"

VARS MINI SCRAMARCH="slc7_amd64_gcc700"
VARS MINI CMSSW="CMSSW_10_6_20"
VARS MINI CONFIG="MINI_cfg.py"

VARS MINI SCRAMARCH="slc7_amd64_gcc700"
VARS CLEANUP CMSSW="CMSSW_10_6_20"

#
# SIMULATION CHAIN:
#

PARENT LHE CHILD Merge
PARENT Merge CHILD pLHE
PARENT pLHE CHILD GEN
PARENT GEN CHILD SIM
PARENT SIM CHILD DR
PARENT DR CHILD HLT
PARENT HLT CHILD RECO
PARENT RECO CHILD MINI
PARENT MINI CHILD CLEANUP
